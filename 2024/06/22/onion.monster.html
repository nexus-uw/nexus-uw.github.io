<!DOCTYPE html>
<html>

  
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>https://onion.monster</title>
  <meta name="description" content="disclaimer">
  <meta name="image" content="/favicon-32x32.png">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://ramsay.xyz/2024/06/22/onion.monster.html">
  <link rel="alternate" type="application/rss+xml" title="Simon Ramsay" href="/feed.xml">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/manifest.json">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#b91d47">
  <meta name="theme-color" content="#b91d47">
  <meta http-equiv="onion-location" content="http://ramsayswljlwqo7yvw3ovxhyzavllyduxkgh4rbobzkc263jyro6cjyd.onion/2024/06/22/onion.monster.html" />
  <meta http-equiv="Content-Security-Policy" content="default-src 'none'; img-src 'self'; style-src 'self'; manifest-src 'self';">
  <meta name="google" content="notranslate"/>

</head>


  <body>

    
<header class="">

  <div class="header-links">

    <a class="" href="/">Simon Ramsay</a>

    <div class="about-link">
      |
      <a class="" href="/about">about</a>
    </div>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <div class="post-header">
    <h1 class="post-title" itemprop="name headline">https://onion.monster</h1>
    <p class="post-meta"><time datetime="2024-06-22T00:00:00-05:00" itemprop="datePublished">Jun 22, 2024</time> • <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Simon</span></span></p>
  </div>

  <div class="post-content" itemprop="articleBody">
    <hr />
<h1 id="disclaimer">disclaimer</h1>

<p>this may all be silly and a waste of time</p>

<hr />

<p><a href="https://onion.monster">SITE</a></p>

<p><a href="https://github.com/nexus-uw/cosburn-is-lost">CODE</a></p>

<h2 id="what">what</h2>
<p>onion.monster is a <a href="https://en.wikipedia.org/wiki/Tor2web">tor2web</a> style proxy but only intended to expose hidden services as activity pub servers. 
 This allows them to federate with <em>all</em> other servers without them having to set up their own tor proxy + routing AND it allows for https requests to be made to the hidden service. The ability to receive incoming HTTPS requests if very important because a lot fo ActivityPub implementations are HTTPS only.</p>

<h2 id="how">how</h2>

<p><img src="/assets/onion.monster.drawio.png" alt="onion.monster arch" /></p>

<h2 id="why">why</h2>
<p>This lets people spin up their own ActivityPub server without having to disclose their server location or have knowledge of where their clients are connecting from.
Edgy Boys/Girls can use this to (kinda) improve the opsec of their little larps.</p>

<p>Additionally, as a project, it is also something fun + limited to implement in my spare time.</p>

<h2 id="security-problems">security problems</h2>
<h3 id="early-https-termination">early HTTPS termination</h3>
<p>HTTPS is terminated at proxy level, and a HTTP request is made to the hidden service. while the http connection is safe to move through the tor network (due to onion routing), it is exposed to the proxy.
the proxy could inspect the contents of the request (severity of this depends if the message is intended to be private or public and how the server is intended to be operated)</p>

<p>As a publisher/user, connecting to the server through onion.monster is riskier since there is no mechanism to guarantee that the request has not been modified by the server. Even more concerning, the user passwords are exposed to the proxy (where they could be logged) and not all servers <a href="https://github.com/superseriousbusiness/gotosocial/issues/395">support 2fa</a>.</p>

<p>At the end of the day, the proxy does not need to inspect the contents of the request, only hostname. Ideally, it would be best if the proxy could not access the contents of the request.</p>

<h3 id="cookie-attacks">cookie attacks</h3>
<p>Since all servers are running under same root domain, they have the ability to muck around with cookies on the root domain.</p>

<p><a href="https://aszx87410.github.io/beyond-xss/en/ch4/cookie-bomb/">attack details</a></p>

<h3 id="things-that-work-fine-otherwise">things that work fine otherwise</h3>
<ul>
  <li>incoming federation requests - http signature ensures that they have not been tamper with by the proxy</li>
  <li>outgoing federation requests - they do not go back out through the proxy (but ideally their own tor)</li>
  <li>very limited amount of code - reduces attack surfaces + easy to audi</li>
</ul>

<p>TODO - confirm publishers should connect to their server either locally OR directly through their onion domain</p>

<h3 id="federation-problemrisk">federation problem/risk</h3>
<p>Randos are operating under the same root domain, if someone finds a problem with a single server, they may just blacklist the entire root domain. If this blacklisting grows to be included in the shared blacklists, then all servers (including future ones) will never been seen by a good chunk of the “fedi verse”</p>

<p>This is why running a server using one of the existing tor2web services, would not be a good idea (since they are <em>mostly</em> unmoderated). onion.monster operates on a whitelist model, where only known servers are allowed to be served through it. Ideally, if someone starts to cause trouble, only they will be removed
-&gt; this does still have the ‘someone else’ can kick me off a fedi server if they dont like me BUT said bad actor would still process  their data, and they could move their server elsewhere.</p>

<h2 id="next-steps">next steps</h2>
<p>would be really cool if the proxy did not have to know about the contents of the request. There are possible 2 ways of achieving this:</p>
<ol>
  <li>HTTPS onion domains, <a href="https://community.torproject.org/onion-services/advanced/https/">as of 2024 they are expensive, rare, and difficult to get</a>. MAYBE this will change in the future.</li>
  <li>e2e encryption on the publisher messages to the server BUT that requires a custom client + server. this does not exist today AND it would require a custom implementation. since I see this as a very small niche (and kinda against the intent of activity pub with servers + server administration being very important) I dont see anyone implementing  this
this does start sounding more like Nostr….</li>
  <li>ActivityPub relay? If this could be more easily exposed through a relay, do let me know.</li>
</ol>

  </div>

</article>

      </div>
    </div>

    <footer class="site-footer">
  <div class="wrapper">
    <h2 class="footer-heading">Simon Ramsay
      <a href="http://ramsayswljlwqo7yvw3ovxhyzavllyduxkgh4rbobzkc263jyro6cjyd.onion">(TOR)</a>
      <a href="http://ramsay.i2p/">(I2P)</a></h2>
      <div class="footer-col-wrapper">
        <div class="footer-col footer-col-6">
          <ul class="contact-list">
            <li>
              <a href="mailto:simon@ramsay.xyz">simon@ramsay.xyz</a>
            </li>
            <li>
              <a href="https://keybase.io/nexusuw/key.asc">F50F7E3612EA2B78</a>
            </li>
          </ul>
        </div>
        <div class="footer-col footer-col-6">
          <ul class="social-media-list">
            <li><a href="https://github.com/nexus-uw"><span class="icon icon--github"><svg viewBox="0 0 16 16"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">nexus-uw</span></a>
</li>
            <li><a href="https://keybase.io/nexusuw"><span class="username">Keybase: nexusuw</span></a> <a href="http://keybase5wmilwokqirssclfnsqrjdsi7jdir5wy7y7iu3tanwmtp6oid.onion/nexusuw">(TOR)</a>
</li>
          </ul>
        </div>
        <div class="footer-col footer-col-12">
          2013 - CURRENT YEAR <a href="http://unlicense.org">Unlicensed</a>
        </div>
      </div>
  </div>
</footer>

    <p class="china_number_1">动态网自由门 天安門 天安门 法輪功 李洪志 Free Tibet 六四天安門事件 The Tiananmen Square protests of 1989 天安門大屠殺 The Tiananmen Square Massacre
    反右派鬥爭 The Anti-Rightist Struggle 大躍進政策 The Great Leap Forward 文化大革命 The Great Proletarian Cultural Revolution 人權 Human
    Rights 民運 Democratization 自由 Freedom 獨立 Independence 多黨制 Multi-party system 台灣 臺灣 Taiwan Formosa 中華民國 Republic of China
    西藏 土伯特 唐古特 Tibet 達賴喇嘛 Dalai Lama 法輪功 Falun Dafa 新疆維吾爾自治區 The Xinjiang Uyghur Autonomous Region 諾貝爾和平獎 Nobel Peace Prize
    劉暁波 Liu Xiaobo 民主 言論 思想 反共 反革命 抗議 運動 騷亂 暴亂 騷擾 擾亂 抗暴 平反 維權 示威游行 李洪志 法輪大法 大法弟子 強制斷種 強制堕胎 民族淨化 人體實驗 肅清 胡耀邦 趙紫陽 魏京生 王丹 還政於民
    和平演變 激流中國 北京之春 大紀元時報 九評論共産黨 獨裁 專制 壓制 統一 監視 鎮壓 迫害 侵略 掠奪 破壞 拷問 屠殺 活摘器官 誘拐 買賣人口 遊進 走私 毒品 賣淫 春畫 賭博 六合彩 天安門 天安门 法輪功 李洪志
    Winnie the Pooh 劉曉波动态网自由门
    
    #Literally #china #copypasta</p>
  </body>

</html>
